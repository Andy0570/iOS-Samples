> 原文及参考：
>
> * [Using Gesture Recognizers to Handle Pinch, Rotate, Pan, Swipe and Tap Gestures](https://www.appcoda.com/ios-gesture-recognizers/)
> * [手势控制：点击、滑动、平移、捏合、旋转、长按、轻扫](https://github.com/pro648/tips/wiki/%E6%89%8B%E5%8A%BF%E6%8E%A7%E5%88%B6%EF%BC%9A%E7%82%B9%E5%87%BB%E3%80%81%E6%BB%91%E5%8A%A8%E3%80%81%E5%B9%B3%E7%A7%BB%E3%80%81%E6%8D%8F%E5%90%88%E3%80%81%E6%97%8B%E8%BD%AC%E3%80%81%E9%95%BF%E6%8C%89%E3%80%81%E8%BD%BB%E6%89%AB)


读者朋友们，你们好！iOS 8 已经临门一脚了，因为距离更新版本的操作系统正式发布只剩下几周时间，随之而来的是Swift编程语言的发布。所以，正如你所了解的那样，我们正准备进入iOS SDK的新时代，那里有新的精彩技术等待着我们去探索它们! 然而，在Appcoda这里，我们决定用Objective-C语言为现有的SDK再奉献一篇教程。我的下一篇教程将重点介绍iOS 8的新技术，我们将使用Swift语言。关于这一篇，有很多候选主题可以写，但最终选择的是关于手势识别器的。那么，让我们来看看它们的一些情况。

手势识别器（Gesture Recognizer）实际上是一个抽象类 `UIGestureRecognizer` 的对象。该对象与一个视图关联，并监控在该视图上做出的预定义手势。再深一层，我想说的是，手势实际上是一个或多个手指在屏幕的特定区域上发生的触摸和动作，那里存在一个对此动作感兴趣的视图。在iOS SDK的早期版本中，并没有向开发者提供手势识别器，所以实现这样的交互方式需要大量的手工操作。值得庆幸的是，苹果将这些手工工作全部打包，作为一个工具交给了开发者，这样一来，使用手势识别器工作就成为了iOS编程中真正简单的一部分。

`UIGestureRecognizer` 类作为抽象类，不能直接使用。它有一些特定的子类提供给大家使用，每一个子类都处理一种特定的手势。我们先来了解一下它们，让我们看看各自的手势是干什么用的。

1. `UITapGestureRecognizer`：点击手势识别器，手势可以是点击一次或多次，可以是一个手指也可以是多个手指。点击手势是用户最常用的手势之一。
2. `UISwipeGestureRecognizer`：滑动手势识别器，滑动方向可以是上下左右任一方向。滑动手势的典型示例是查看照片的应用程序，我们使用手指从一张照片滑动到另一张照片。
3. `UIPanGestureRecognizer`：平移手势识别器，也称为拖动手势识别器。当需要将视图从一个点拖动到另一个点时，就会用到它。当用户平移视图时，必须保持一个或多个手指始终按压在视图上。
4. `UIPinchGestureRecognizer`。捏合手势识别器，需要两个手指同时触摸视图。当两个手指靠近时，视图缩小；当两根手指远离时，视图放大。当你在 "照片 "应用中查看照片时，你用两根手指放大或缩小照片，那么你就会执行一个捏合的手势。正如你所理解的那样，捏住需要两根手指。这个类的对象通常可以方便地改变视图的变换，更具体地说，就是改变其比例。例如使用捏合手势，你可以在自己的应用程序上实现对照片的放大和缩小。
5. `UIRotationGestureRecognizer`：旋转手势识别器，需要两个手指同时触摸视图。当用户手指彼此相对做圆周运动时，对应视图会以相同的方向和速度旋转。
6. `UILongPressGestureRecognizer`：长按手势识别器，想要成功触发长按手势，需使用一个或多个手指在视图上按压不小于 `minimumPressDuration` 设定的时长，默认 0.5 秒，并且长按时手指移动的距离要小于 `allowableMovement` 设定的距离，默认距离 10 points。
7. `UIScreenEdgePanGestureRecognizer`：屏幕边缘轻扫手势识别器，继承自 `UIPanGestureRecognizer`，前面六个手势识别器均继承自 `UIGestureRecognizer`。屏幕边缘轻扫手势识别器只能识别在屏幕边缘附近开始的手势。与滑动手势很像，不同之处在于前者必须从屏幕边缘开始。可以使用屏幕边缘手势来启动视图控制器转换。

上面的这些手势不是离散（discrete）的就是连续（continuous）的。离散的手势识别器从手势开始到结束只向目标发送单个动作消息，例如点击手势、滑动手势。连续手势的手势识别器为每个增量变化发送动作消息，直到多点触摸序列结束，例如平移手势、捏合手势、旋转手势。

> 窗口在将触摸事件递送给视图前会先递送给手势识别器。如果手势识别器不能识别出该触摸事件，窗口才会把触摸事件递送给添加手势识别器的视图；如果手势识别器可以识别出该触摸事件，对应视图将不会收到窗口递送的触摸事件。

一旦检测到一个有效的手势，所有的手势对象都会执行一个动作。如果手势是通过 Interface Builder 添加的，则是 IBAction 方法；如果是程序化实现的，则是私有或公共方法。当手势发生后调用动作方法时，一般会把手势识别器作为参数，以便在处理手势事件需要额外信息时可供使用。为了在签名中包含手势对象，并不一定要声明动作方法，但我个人建议你这样做，因为这是一个更好的编程实践。例如，以下两种方法签名都是有效的。

```objc
-(void)handleMyTapGesture;
-(void)handleMyTapGestureWithGestureRecognizer:(UITapGestureRecognizer *)gestureRecognizer;
```

在第二种情况下，`gestureRecognizer` 参数可以为你提供你可能需要的额外信息，比如手势发生的视图。在本教程的例子中，我将在声明处理手势的方法时使用第二种方法。

现在从视图的角度来看，一个视图可以包含多个手势识别器。例如，你可以在一个`imageview` 中同时添加捏合和旋转手势识别器，这样你就可以放大/缩小和旋转呈现的图像。但是，在特定时间内只能出现一个手势。与一个视图相关的手势识别器会被添加到该视图的数组中，所以你可以像访问任何对象一样通过一个数组访问它们。不过我想，你很少会需要以这种方式访问手势识别器对象。

正如你在接下来的教程中会看到的那样，使用手势识别器工作是非常简单的，它包含了一种非常棒的方式来为你的应用程序提供交互，而无需使用传统的子视图来执行操作（如按钮）。在我们继续之前，我应该提到，我们将把注意力集中在前五个手势识别器类上，而对于最后两个类，我们只是对它们每个类说两句。这是因为它们和其他类有很大的相似之处，所以同样的东西讨论两遍就没意思了。另外，我之前说过，手势识别器可以通过两种方式添加到视图中。要么使用界面生成器，要么通过编程添加。在这里，我将遵循第二条道路，并在代码中完成一切。如果你想阅读更多关于手势识别器的理论性东西，那么可以随时访问苹果官方提供的文档。

## Demo App Overview

我们在本教程中的工作方式非常简单。首先，我们将创建一个标签式应用，其中将包含五个标签。每个标签页将匹配到一个单一的视图控制器，而每个视图控制器将用于演示一个新的手势识别器。此外，我们将创建五个视图控制器类，以实现我们将遇到的每个手势识别器的必要代码。

我们要使用的手势识别器的顺序如下。

* 点击手势识别器
* 滑动手势识别器
* 平移手势识别器
* 捏手势识别器
* 旋转手势识别器

对于每一个例子，我们将创建一个或多个测试视图，然后我们将实现必要的代码，使各自的手势正确工作。因此，我可以说，本教程的演示应用将由许多小例子组成，其中每一个例子的目标都是研究一个手势识别器。



...

